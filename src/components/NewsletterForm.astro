---
import SectionHeader from "./SectionHeader.astro";

interface Props {
  heading?: string;
  description?: string;
  showBorder?: boolean;
  hideWhenSubscribed?: boolean;
}

const {
  heading = "Subscribe",
  description = "I send a short email once a month with what I've been writing about. No spam, unsubscribe anytime.",
  showBorder = false,
  hideWhenSubscribed = false,
} = Astro.props;
---

<section
  class={`newsletter-form-section ${showBorder ? "border-top" : ""}`}
  data-js-newsletter-form
  data-js-hide-when-subscribed={hideWhenSubscribed ? "true" : undefined}
>
  <SectionHeader id="newsletter" title={heading} />
  <p>{description}</p>
  <form class="newsletter-form d-flex gap-2" data-js-newsletter-submit>
    <input
      type="email"
      name="email"
      placeholder="you@example.com"
      required
      autocomplete="email"
      class="newsletter-input flex-1"
      data-js-newsletter-email
    />
    <button type="submit" class="newsletter-btn btn-secondary" data-js-newsletter-btn>
      Subscribe
    </button>
  </form>
  <div class="newsletter-status" data-js-newsletter-status></div>
</section>
